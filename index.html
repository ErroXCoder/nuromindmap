<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interaktive Mindmap</title>
    <style>
        body {
            margin: 0;
            overflow: hidden;
            font-family: Arial, sans-serif;
        }
        #networkCanvas {
            display: block;
            background: #f4f4f4;
        }
        #controls {
            position: fixed;
            top: 10px;
            left: 10px;
            background: rgba(255, 255, 255, 0.9);
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            z-index: 1000;
            max-width: 300px;
        }
        #tooltip {
            position: absolute;
            background: rgba(0, 0, 0, 0.8);
            color: white;
            padding: 10px;
            border-radius: 5px;
            display: none;
            pointer-events: none;
            font-size: 14px;
        }
        label {
            display: block;
            margin: 10px 0 5px;
        }
        input, select, button {
            width: 100%;
            padding: 8px;
            margin-bottom: 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
        }
        button {
            background: #007BFF;
            color: white;
            font-weight: bold;
            cursor: pointer;
        }
        button:hover {
            background: #0056b3;
        }
    </style>
</head>
<body>
<canvas id="networkCanvas"></canvas>
<div id="tooltip"></div>

<div id="controls">
    <h3>Neuen Knoten hinzufügen</h3>
    <label for="nodeLabel">Bezeichnung</label>
    <input type="text" id="nodeLabel" placeholder="Knotenname">
    <label for="nodeColor">Farbe</label>
    <input type="color" id="nodeColor" value="#007BFF">
    <label for="nodeCategory">Kategorie</label>
    <input type="text" id="nodeCategory" placeholder="Kategorie">
    <label for="nodeDescription">Beschreibung</label>
    <input type="text" id="nodeDescription" placeholder="Beschreibung">
    <button id="addNode">Knoten hinzufügen</button>

    <h3>Neue Verbindung hinzufügen</h3>
    <label for="sourceNode">Startknoten-ID</label>
    <input type="number" id="sourceNode" placeholder="Start-ID">
    <label for="targetNode">Zielknoten-ID</label>
    <input type="number" id="targetNode" placeholder="Ziel-ID">
    <label for="linkColor">Verbindungsfarbe</label>
    <input type="color" id="linkColor" value="#cccccc">
    <button id="addLink">Verbindung hinzufügen</button>
</div>

<script>
    const canvas = document.getElementById('networkCanvas');
    const ctx = canvas.getContext('2d');
    const tooltip = document.getElementById('tooltip');
    const controls = document.getElementById('controls');

    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;

    const nodes = [
        { id: 1, x: 300, y: 300, label: "Hauptknoten", color: "#007BFF", category: "Haupt", description: "Das ist der Hauptknoten." }
    ];

    const links = [];

    function draw() {
        ctx.clearRect(0, 0, canvas.width, canvas.height);

        // Links zeichnen
        links.forEach(link => {
            const source = nodes.find(node => node.id === link.source);
            const target = nodes.find(node => node.id === link.target);
            if (source && target) {
                ctx.beginPath();
                ctx.moveTo(source.x, source.y);
                ctx.lineTo(target.x, target.y);
                ctx.strokeStyle = link.color || "#ccc";
                ctx.lineWidth = 2;
                ctx.stroke();
            }
        });

        // Knoten zeichnen
        nodes.forEach(node => {
            ctx.beginPath();
            ctx.arc(node.x, node.y, 20, 0, Math.PI * 2);
            ctx.fillStyle = node.color;
            ctx.fill();
            ctx.strokeStyle = "#ffffff";
            ctx.lineWidth = 2;
            ctx.stroke();

            ctx.fillStyle = "#fff";
            ctx.textAlign = "center";
            ctx.font = "14px Arial";
            ctx.fillText(node.label, node.x, node.y + 4);
        });
    }

    function getMousePos(evt) {
        const rect = canvas.getBoundingClientRect();
        return {
            x: evt.clientX - rect.left,
            y: evt.clientY - rect.top
        };
    }

    function findNodeAtPosition(pos) {
        return nodes.find(node => {
            const dx = pos.x - node.x;
            const dy = pos.y - node.y;
            return Math.sqrt(dx * dx + dy * dy) < 20;
        });
    }

    canvas.addEventListener('mousemove', (event) => {
        const pos = getMousePos(event);
        const hoveredNode = findNodeAtPosition(pos);
        if (hoveredNode) {
            tooltip.style.left = event.clientX + 10 + 'px';
            tooltip.style.top = event.clientY + 10 + 'px';
            tooltip.innerHTML = `
                <strong>${hoveredNode.label}</strong><br>
                Kategorie: ${hoveredNode.category}<br>
                Beschreibung: ${hoveredNode.description}
            `;
            tooltip.style.display = 'block';
        } else {
            tooltip.style.display = 'none';
        }
    });

    window.addEventListener('resize', () => {
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;
        draw();
    });

    // Knoten hinzufügen
    document.getElementById('addNode').addEventListener('click', () => {
        const label = document.getElementById('nodeLabel').value;
        const color = document.getElementById('nodeColor').value;
        const category = document.getElementById('nodeCategory').value;
        const description = document.getElementById('nodeDescription').value;

        const newNode = {
            id: nodes.length + 1,
            x: Math.random() * canvas.width,
            y: Math.random() * canvas.height,
            label,
            color,
            category,
            description
        };
        nodes.push(newNode);
        draw();
    });

    // Verbindung hinzufügen
    document.getElementById('addLink').addEventListener('click', () => {
        const source = parseInt(document.getElementById('sourceNode').value);
        const target = parseInt(document.getElementById('targetNode').value);
        const color = document.getElementById('linkColor').value;

        const newLink = { source, target, color };
        links.push(newLink);
        draw();
    });

    draw();
</script>
</body>
</html>
